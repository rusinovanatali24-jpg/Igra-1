<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–¥–∞–∫—Ç–æ—Ä –∏–≥—Ä—ã "–û—Ö–æ—Ç–∞ –∑–∞ —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏" PRO</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }
        .tabs { display: flex; background: #f5f5f5; border-bottom: 2px solid #ddd; }
        .tab { flex: 1; padding: 20px; text-align: center; cursor: pointer; font-weight: bold; transition: 0.3s; border: none; background: transparent; color: #666; }
        .tab.active { background: white; color: #667eea; border-bottom: 3px solid #667eea; }
        .tab-content { padding: 40px; display: none; }
        .tab-content.active { display: block; }
        .section { margin-bottom: 30px; padding: 25px; background: #f9f9f9; border-radius: 12px; border-left: 5px solid #667eea; }
        .theme-selector { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; }
        .theme-card { padding: 15px; border: 3px solid #eee; border-radius: 12px; text-align: center; cursor: pointer; background: white; }
        .theme-card.selected { border-color: #667eea; background: #f0f4ff; }
        .theme-card svg { width: 50px; height: 50px; margin-bottom: 10px; fill: #667eea; }
        .map-editor { width: 100%; height: 600px; border: 4px solid #8b4513; border-radius: 15px; background-size: cover; background-position: center; position: relative; background-color: #eee; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; }
        input, select { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; }
        .answer-item { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        .btn { padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; border: none; }
        .btn-success { background: #27ae60; color: white; }
        .btn-primary { background: #667eea; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header"><h1>–†–µ–¥–∞–∫—Ç–æ—Ä "–û—Ö–æ—Ç–∞ –∑–∞ —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏"</h1></div>
        <div class="tabs">
            <button class="tab active" onclick="switchTab(0)">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            <button class="tab" onclick="switchTab(1)">–í–æ–ø—Ä–æ—Å—ã</button>
            <button class="tab" onclick="switchTab(2)">–ö–∞—Ä—Ç–∞</button>
            <button class="tab" onclick="switchTab(3)">–ü—Ä–µ–≤—å—é</button>
        </div>

        <div class="tab-content active">
            <div class="section">
                <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –∏–≥—Ä—ã</h3>
                <div class="theme-selector" id="themeSelector"></div>
            </div>
            <div class="section">
                <h3>–ù–∞–≥—Ä–∞–¥–∞ –≤ —Ñ–∏–Ω–∞–ª–µ</h3>
                <select id="finalReward">
                    <option value="treasure">üì¶ –°—É–Ω–¥—É–∫ (Classic)</option>
                    <option value="medal">ü•á –ú–µ–¥–∞–ª—å (Gold)</option>
                    <option value="trophy">üèÜ –ö—É–±–æ–∫ (Winner)</option>
                </select>
            </div>
        </div>

        <div class="tab-content">
            <div class="section">
                <button class="btn btn-success" onclick="addQuestion()" style="margin-bottom: 20px;">+ –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
                <div id="questionsList"></div>
            </div>
        </div>

        <div class="tab-content">
            <div class="section">
                <div class="map-editor" id="mapEditor"></div>
            </div>
        </div>

        <div class="tab-content">
            <div class="section" style="text-align: center;">
                <button class="btn btn-primary" onclick="exportGame()" style="font-size: 1.5em; padding: 20px 50px;">üíæ –°–ö–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
            </div>
        </div>
    </div>

<script>
const myMaps = {
    pirates: 'https://raw.githubusercontent.com/fshv-dev/treasure-assets/main/pirates_map.jpg',
    space: 'https://raw.githubusercontent.com/fshv-dev/treasure-assets/main/space_map.jpg',
    jungle: 'https://raw.githubusercontent.com/fshv-dev/treasure-assets/main/jungle_map.jpg',
    underwater: 'https://raw.githubusercontent.com/fshv-dev/treasure-assets/main/underwater_map.jpg',
    city: 'https://img.freepik.com/free-vector/city-skyline-concept-illustration_114360-892.jpg'
};

const svgs = {
    pirates: '<svg viewBox="0 0 24 24"><path d="M12,2L4.5,20.29L5.21,21L12,18L18.79,21L19.5,20.29L12,2Z"/></svg>',
    city: '<svg viewBox="0 0 24 24"><path d="M15,11V5L12,2L9,5V7H3V21H21V11H15M7,19H5V17H7V19M7,15H5V13H7V15M7,11H5V9H7V11M13,19H11V17H13V19M13,15H11V13H13V15M13,11H11V9H13V11M13,7H11V5H13V7M19,19H17V17H19V19M19,15H17V13H19V15"/></svg>',
    space: '<svg viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"/></svg>',
    jungle: '<svg viewBox="0 0 24 24"><path d="M17,8C15.34,8 14,9.34 14,11C14,12.08 14.56,13.03 15.41,13.58C14.05,14.28 13.1,15.69 13.1,17.31C13.1,18.03 13.29,18.7 13.62,19.28C11.96,19.16 10.6,17.74 10.6,16C10.6,14.66 11.47,13.53 12.67,13.13C12.24,12.53 12,11.8 12,11C12,9.34 13.34,8 15,8M15,6C12.24,6 10,8.24 10,11C10,12.16 10.4,13.22 11.06,14.05C8.16,14.57 6,17.03 6,20H18C18,16.69 15.31,14 12,14C12.95,14 13.82,13.62 14.47,13C16.44,13 18,11.44 18,9.5C18,7.56 16.44,6 14.5,6H15Z"/></svg>',
    underwater: '<svg viewBox="0 0 24 24"><path d="M20,15V18H4V15H2V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V15H20M12,16L17,11L15.59,9.58L13,12.17V4H11V12.17L8.41,9.58L7,11L12,16Z"/></svg>'
};

let editorData = { theme: 'pirates', questions: [] };

function renderThemes() {
    const container = document.getElementById('themeSelector');
    const list = [
        {id:'pirates', name:'–ü–∏—Ä–∞—Ç—ã'}, {id:'space', name:'–ö–æ—Å–º–æ—Å'}, 
        {id:'jungle', name:'–î–∂—É–Ω–≥–ª–∏'}, {id:'underwater', name:'–ú–æ—Ä–µ'}, {id:'city', name:'–ì–æ—Ä–æ–¥'}
    ];
    container.innerHTML = list.map(t => `
        <div class="theme-card ${t.id === editorData.theme ? 'selected' : ''}" onclick="selectTheme('${t.id}')">
            ${svgs[t.id]}
            <div style="font-weight:bold">${t.name}</div>
        </div>
    `).join('');
}

function selectTheme(id) {
    editorData.theme = id;
    renderThemes();
    document.getElementById('mapEditor').style.backgroundImage = `url('${myMaps[id]}')`;
}

function switchTab(i) {
    document.querySelectorAll('.tab, .tab-content').forEach(el => el.classList.remove('active'));
    document.querySelectorAll('.tab')[i].classList.add('active');
    document.querySelectorAll('.tab-content')[i].classList.add('active');
}

function addQuestion() {
    const q = { id: Date.now(), text: '', answers: [{text: '', correct: true}] };
    editorData.questions.push(q);
    renderQuestions();
}

function renderQuestions() {
    document.getElementById('questionsList').innerHTML = editorData.questions.map((q, i) => `
        <div class="section" style="background:white;">
            <p><b>–í–æ–ø—Ä–æ—Å ${i+1}</b></p>
            <input type="text" placeholder="–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞" value="${q.text}" style="margin: 10px 0;">
            <div class="answer-item">
                <input type="radio" checked> <input type="text" placeholder="–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç">
            </div>
        </div>
    `).join('');
}

window.onload = () => { renderThemes(); selectTheme('pirates'); };
</script>
</body>
</html>
